var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(e)}function l(t){return"function"==typeof t}function r(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function c(e,n,o){e.$$.on_destroy.push(function(e,...n){if(null==e)return t;const o=e.subscribe(...n);return o.unsubscribe?()=>o.unsubscribe():o}(n,o))}function s(t,e,n=e){return t.set(n),e}function i(t,e){t.appendChild(e)}function a(t,e,n){t.insertBefore(e,n||null)}function u(t){t.parentNode.removeChild(t)}function d(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function f(t){return document.createElement(t)}function p(t){return document.createTextNode(t)}function m(){return p(" ")}function h(){return p("")}function g(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function $(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function y(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}class w{constructor(t=null){this.a=t,this.e=this.n=null}m(t,e,n=null){this.e||(this.e=f(e.nodeName),this.t=e,this.h(t)),this.i(n)}h(t){this.e.innerHTML=t,this.n=Array.from(this.e.childNodes)}i(t){for(let e=0;e<this.n.length;e+=1)a(this.t,this.n[e],t)}p(t){this.d(),this.h(t),this.i(this.a)}d(){this.n.forEach(u)}}let b;function v(t){b=t}const A=[],x=[],P=[],N=[],k=Promise.resolve();let M=!1;function T(t){P.push(t)}let _=!1;const E=new Set;function R(){if(!_){_=!0;do{for(let t=0;t<A.length;t+=1){const e=A[t];v(e),C(e.$$)}for(A.length=0;x.length;)x.pop()();for(let t=0;t<P.length;t+=1){const e=P[t];E.has(e)||(E.add(e),e())}P.length=0}while(A.length);for(;N.length;)N.pop()();M=!1,_=!1,E.clear()}}function C(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(T)}}const S=new Set;let L;function B(){L={r:0,c:[],p:L}}function I(){L.r||o(L.c),L=L.p}function O(t,e){t&&t.i&&(S.delete(t),t.i(e))}function U(t,e,n,o){if(t&&t.o){if(S.has(t))return;S.add(t),L.c.push(()=>{S.delete(t),o&&(n&&t.d(1),o())}),t.o(e)}}function V(t,e){t.d(1),e.delete(t.key)}function W(t,e,n,o,l,r,c,s,i,a,u,d){let f=t.length,p=r.length,m=f;const h={};for(;m--;)h[t[m].key]=m;const g=[],$=new Map,y=new Map;for(m=p;m--;){const t=d(l,r,m),s=n(t);let i=c.get(s);i?o&&i.p(t,e):(i=a(s,t),i.c()),$.set(s,g[m]=i),s in h&&y.set(s,Math.abs(m-h[s]))}const w=new Set,b=new Set;function v(t){O(t,1),t.m(s,u),c.set(t.key,t),u=t.first,p--}for(;f&&p;){const e=g[p-1],n=t[f-1],o=e.key,l=n.key;e===n?(u=e.first,f--,p--):$.has(l)?!c.has(o)||w.has(o)?v(e):b.has(l)?f--:y.get(o)>y.get(l)?(b.add(o),v(e)):(w.add(l),f--):(i(n,c),f--)}for(;f--;){const e=t[f];$.has(e.key)||i(e,c)}for(;p;)v(g[p-1]);return g}function j(t){t&&t.c()}function D(t,n,r){const{fragment:c,on_mount:s,on_destroy:i,after_update:a}=t.$$;c&&c.m(n,r),T(()=>{const n=s.map(e).filter(l);i?i.push(...n):o(n),t.$$.on_mount=[]}),a.forEach(T)}function H(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function X(t,e){-1===t.$$.dirty[0]&&(A.push(t),M||(M=!0,k.then(R)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function q(e,l,r,c,s,i,a=[-1]){const d=b;v(e);const f=l.props||{},p=e.$$={fragment:null,ctx:null,props:i,update:t,not_equal:s,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(d?d.$$.context:[]),callbacks:n(),dirty:a};let m=!1;if(p.ctx=r?r(e,f,(t,n,...o)=>{const l=o.length?o[0]:n;return p.ctx&&s(p.ctx[t],p.ctx[t]=l)&&(p.bound[t]&&p.bound[t](l),m&&X(e,t)),n}):[],p.update(),m=!0,o(p.before_update),p.fragment=!!c&&c(p.ctx),l.target){if(l.hydrate){const t=function(t){return Array.from(t.childNodes)}(l.target);p.fragment&&p.fragment.l(t),t.forEach(u)}else p.fragment&&p.fragment.c();l.intro&&O(e.$$.fragment),D(e,l.target,l.anchor),R()}v(d)}class G{$destroy(){H(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}}const Y=[];function z(e,n=t){let o;const l=[];function c(t){if(r(e,t)&&(e=t,o)){const t=!Y.length;for(let t=0;t<l.length;t+=1){const n=l[t];n[1](),Y.push(n,e)}if(t){for(let t=0;t<Y.length;t+=2)Y[t][0](Y[t+1]);Y.length=0}}}return{set:c,update:function(t){c(t(e))},subscribe:function(r,s=t){const i=[r,s];return l.push(i),1===l.length&&(o=n(c)||t),r(e),()=>{const t=l.indexOf(i);-1!==t&&l.splice(t,1),0===l.length&&(o(),o=null)}}}}let F=z({round:1,turn:0,status:"",dicesArr:[0,0,0,0]}),J=z({points:[],won:null}),K=z([{col:[[13,14,15,0,1,2,3,4],[12,11,10,9,8,7,6,5],[13,14,15,0,1,2,3,4]]},{col:[[{},{},{},{},{},{},{},{}],[{},{},{},{},{},{},{},{}],[{},{},{},{},{},{},{},{}]]}]),Q=z([[{loc:0,p:1,id:1},{loc:0,p:1,id:2},{loc:0,p:1,id:3},{loc:0,p:1,id:4},{loc:0,p:1,id:5},{loc:0,p:1,id:6},{loc:0,p:1,id:7}],[{loc:0,p:2,id:1},{loc:0,p:2,id:2},{loc:0,p:2,id:3},{loc:0,p:2,id:4},{loc:0,p:2,id:5},{loc:0,p:2,id:6},{loc:0,p:2,id:7}]]);function Z(t){let e,n,o,l,r=t[0].id+"";return{c(){e=f("div"),n=p(r),$(e,"class","pawn"),$(e,"data-owner",o=t[0].p),$(e,"data-pawnname",l=t[0].id)},m(t,o){a(t,e,o),i(e,n)},p(t,c){1&c&&r!==(r=t[0].id+"")&&y(n,r),1&c&&o!==(o=t[0].p)&&$(e,"data-owner",o),1&c&&l!==(l=t[0].id)&&$(e,"data-pawnname",l)},d(t){t&&u(e)}}}function tt(e){let n,o=void 0!==e[0]&&Z(e);return{c(){o&&o.c(),n=h()},m(t,e){o&&o.m(t,e),a(t,n,e)},p(t,[e]){void 0!==t[0]?o?o.p(t,e):(o=Z(t),o.c(),o.m(n.parentNode,n)):o&&(o.d(1),o=null)},i:t,o:t,d(t){o&&o.d(t),t&&u(n)}}}function et(t,e,n){let o;c(t,Q,t=>n(4,o=t));let l,r,{col:s}=e,{loc:i}=e;return t.$set=t=>{"col"in t&&n(1,s=t.col),"loc"in t&&n(2,i=t.loc)},t.$$.update=()=>{if(31&t.$$.dirty)for(let t=0;t<2;t++){let c=o[t];if("safe"==((e=i)<5||12<e?"safe":"combat")?(n(3,l=0===s?1:2),n(0,r=c.find(t=>t.loc===i&&t.p===l))):n(0,r=c.find(t=>t.loc===i)),r){console.table("PAWN onboard!","","owner:",r.p,"","id:",r.id,"","loc:",r.loc,"");break}}var e},[r,s,i]}class nt extends G{constructor(t){super(),q(this,t,et,tt,r,{col:1,loc:2})}}function ot(e){let n,o;return{c(){n=f("div"),o=p(e[1]),$(n,"class","scoreboard"),$(n,"data-owner",e[0])},m(t,e){a(t,n,e),i(n,o)},p(t,[e]){2&e&&y(o,t[1]),1&e&&$(n,"data-owner",t[0])},i:t,o:t,d(t){t&&u(n)}}}function lt(t,e,n){let o,l,r;c(t,Q,t=>n(5,o=t)),c(t,J,t=>n(6,l=t)),c(t,F,t=>n(7,r=t));let i,a,u,d,{col:f}=e;return a=0===f?0:1,i=a+1,t.$set=t=>{"col"in t&&n(2,f=t.col)},t.$$.update=()=>{58&t.$$.dirty&&(n(4,d=o[a].filter(t=>15===t.loc)),n(1,u=d.length),s(J,l.points[a]=u,l)),73&t.$$.dirty&&7===l.points[a]&&(s(J,l.won=i,l),s(F,r.status=`<em class="special">Player ${i} Won!</em>`,r))},[i,u,f]}class rt extends G{constructor(t){super(),q(this,t,lt,ot,r,{col:2})}}function ct(t,e,n){const o=t.slice();return o[17]=e[n],o[19]=n,o}function st(t,e,n){const o=t.slice();return o[23]=e[n],o[25]=n,o}function it(t,e,n){const o=t.slice();return o[20]=e[n],o[22]=n,o}function at(t,e,n){const o=t.slice();return o[17]=e[n],o[19]=n,o}function ut(t){let e,n,o,l=t[17].id+"";return{c(){e=f("div"),n=p(l),$(e,"class","pawn"),$(e,"data-owner","1"),$(e,"data-pawnname",o=t[17].id)},m(t,o){a(t,e,o),i(e,n)},p(t,r){1&r&&l!==(l=t[17].id+"")&&y(n,l),1&r&&o!==(o=t[17].id)&&$(e,"data-pawnname",o)},d(t){t&&u(e)}}}function dt(t,e){let n,o,l=0==e[17].loc&&ut(e);return{key:t,first:null,c(){n=h(),l&&l.c(),o=h(),this.first=n},m(t,e){a(t,n,e),l&&l.m(t,e),a(t,o,e)},p(t,e){0==t[17].loc?l?l.p(t,e):(l=ut(t),l.c(),l.m(o.parentNode,o)):l&&(l.d(1),l=null)},d(t){t&&u(n),l&&l.d(t),t&&u(o)}}}function ft(t){let e,n,o,l,r,c,s,d,h,w,b,v,A=t[23][t[22]]+"";return n=new nt({props:{col:t[25],loc:t[23][t[22]]}}),{c(){e=f("td"),j(n.$$.fragment),o=m(),l=p(A),$(e,"data-col",r=t[25]),$(e,"data-row",c=t[22]),$(e,"data-order",s=t[23][t[22]]),$(e,"data-celltype",d=t[2](t[23][t[22]])),$(e,"class",h=t[3](t[23][t[22]]))},m(r,c){a(r,e,c),D(n,e,null),i(e,o),i(e,l),w=!0,b||(v=g(e,"click",t[6]),b=!0)},p(t,o){const r={};2&o&&(r.loc=t[23][t[22]]),n.$set(r),(!w||2&o)&&A!==(A=t[23][t[22]]+"")&&y(l,A),(!w||2&o&&s!==(s=t[23][t[22]]))&&$(e,"data-order",s),(!w||2&o&&d!==(d=t[2](t[23][t[22]])))&&$(e,"data-celltype",d),(!w||2&o&&h!==(h=t[3](t[23][t[22]])))&&$(e,"class",h)},i(t){w||(O(n.$$.fragment,t),w=!0)},o(t){U(n.$$.fragment,t),w=!1},d(t){t&&u(e),H(n),b=!1,v()}}}function pt(e){let n;return{c(){n=f("td"),$(n,"class","none")},m(t,e){a(t,n,e)},p:t,i:t,o:t,d(t){t&&u(n)}}}function mt(e){let n,o,l;return o=new rt({props:{col:e[25]}}),{c(){n=f("td"),j(o.$$.fragment),$(n,"class","none")},m(t,e){a(t,n,e),D(o,n,null),l=!0},p:t,i(t){l||(O(o.$$.fragment,t),l=!0)},o(t){U(o.$$.fragment,t),l=!1},d(t){t&&u(n),H(o)}}}function ht(t){let e,n,o,l;const r=[mt,pt,ft],c=[];function s(t,e){return"15"==t[23][t[22]]?0:"0"==t[23][t[22]]?1:2}return e=s(t),n=c[e]=r[e](t),{c(){n.c(),o=h()},m(t,n){c[e].m(t,n),a(t,o,n),l=!0},p(t,l){let i=e;e=s(t),e===i?c[e].p(t,l):(B(),U(c[i],1,1,()=>{c[i]=null}),I(),n=c[e],n||(n=c[e]=r[e](t),n.c()),O(n,1),n.m(o.parentNode,o))},i(t){l||(O(n),l=!0)},o(t){U(n),l=!1},d(t){c[e].d(t),t&&u(o)}}}function gt(t){let e,n,o,l=t[1][0].col,r=[];for(let e=0;e<l.length;e+=1)r[e]=ht(st(t,l,e));const c=t=>U(r[t],1,1,()=>{r[t]=null});return{c(){e=f("tr");for(let t=0;t<r.length;t+=1)r[t].c();n=m()},m(t,l){a(t,e,l);for(let t=0;t<r.length;t+=1)r[t].m(e,null);i(e,n),o=!0},p(t,o){if(30&o){let s;for(l=t[1][0].col,s=0;s<l.length;s+=1){const c=st(t,l,s);r[s]?(r[s].p(c,o),O(r[s],1)):(r[s]=ht(c),r[s].c(),O(r[s],1),r[s].m(e,n))}for(B(),s=l.length;s<r.length;s+=1)c(s);I()}},i(t){if(!o){for(let t=0;t<l.length;t+=1)O(r[t]);o=!0}},o(t){r=r.filter(Boolean);for(let t=0;t<r.length;t+=1)U(r[t]);o=!1},d(t){t&&u(e),d(r,t)}}}function $t(t){let e,n,o,l=t[17].id+"";return{c(){e=f("div"),n=p(l),$(e,"class","pawn"),$(e,"data-owner","2"),$(e,"data-pawnname",o=t[17].id)},m(t,o){a(t,e,o),i(e,n)},p(t,r){1&r&&l!==(l=t[17].id+"")&&y(n,l),1&r&&o!==(o=t[17].id)&&$(e,"data-pawnname",o)},d(t){t&&u(e)}}}function yt(t,e){let n,o,l=0==e[17].loc&&$t(e);return{key:t,first:null,c(){n=h(),l&&l.c(),o=h(),this.first=n},m(t,e){a(t,n,e),l&&l.m(t,e),a(t,o,e)},p(t,e){0==t[17].loc?l?l.p(t,e):(l=$t(t),l.c(),l.m(o.parentNode,o)):l&&(l.d(1),l=null)},d(t){t&&u(n),l&&l.d(t),t&&u(o)}}}function wt(t){let e,n,l,r,c,s,p,h,y,w=[],b=new Map,v=[],A=new Map,x=t[0][0];const P=t=>t[17].id;for(let e=0;e<x.length;e+=1){let n=at(t,x,e),o=P(n);b.set(o,w[e]=dt(o,n))}let N=t[1][0].col[0],k=[];for(let e=0;e<N.length;e+=1)k[e]=gt(it(t,N,e));const M=t=>U(k[t],1,1,()=>{k[t]=null});let T=t[0][1];const _=t=>t[17].id;for(let e=0;e<T.length;e+=1){let n=ct(t,T,e),o=_(n);A.set(o,v[e]=yt(o,n))}return{c(){e=f("div"),n=f("div");for(let t=0;t<w.length;t+=1)w[t].c();l=m(),r=f("table");for(let t=0;t<k.length;t+=1)k[t].c();c=m(),s=f("div");for(let t=0;t<v.length;t+=1)v[t].c();$(n,"class","pawns pawns1"),$(s,"class","pawns pawns2"),$(e,"class","board")},m(o,u){a(o,e,u),i(e,n);for(let t=0;t<w.length;t+=1)w[t].m(n,null);i(e,l),i(e,r);for(let t=0;t<k.length;t+=1)k[t].m(r,null);i(e,c),i(e,s);for(let t=0;t<v.length;t+=1)v[t].m(s,null);p=!0,h||(y=[g(n,"click",t[5]),g(s,"click",t[7])],h=!0)},p(t,[e]){if(1&e){const o=t[0][0];w=W(w,e,P,1,t,o,b,n,V,dt,null,at)}if(30&e){let n;for(N=t[1][0].col[0],n=0;n<N.length;n+=1){const o=it(t,N,n);k[n]?(k[n].p(o,e),O(k[n],1)):(k[n]=gt(o),k[n].c(),O(k[n],1),k[n].m(r,null))}for(B(),n=N.length;n<k.length;n+=1)M(n);I()}if(1&e){const n=t[0][1];v=W(v,e,_,1,t,n,A,s,V,yt,null,ct)}},i(t){if(!p){for(let t=0;t<N.length;t+=1)O(k[t]);p=!0}},o(t){k=k.filter(Boolean);for(let t=0;t<k.length;t+=1)U(k[t]);p=!1},d(t){t&&u(e);for(let t=0;t<w.length;t+=1)w[t].d();d(k,t);for(let t=0;t<v.length;t+=1)v[t].d();h=!1,o(y)}}}function bt(t,e,n){let o,l,r;c(t,F,t=>n(9,o=t)),c(t,Q,t=>n(0,l=t)),c(t,K,t=>n(1,r=t));let i=function(t){return t<5||12<t?"safe":"combat"},a=function(t){return 1==o.rolled&&0==o.played&&f==t},u=function(){s(F,o={turn:(o.turn+1)%2,rolled:0,played:0,round:o.round+1,status:o.status+"\n...next turn...",dicesArr:[0,0,0,0]}),console.log("NEXT TURN")},d=function(t,e,n){let r=t-1;if(console.log(a(t)?t+" may play":t+" may not play"),a(t)){let n;const c=l[r].findIndex(t=>t.id===Number(e)),a=l[r][c],d=a.loc+o.diceToMove;let p,m,h;console.log(d,t,a.id,a.loc);let g,$,y,w=!0;"safe"===i(d)?(n=Number(1==t?0:2),console.log("check col",n),15===d?(a.loc=15,s(F,o.status=`<em>Player ${t}'s</em> Pawn <em>${a.id}</em> made it!.\n1 Point for <em>Player ${t}!</em>`,o)):d>15?(w=!1,s(F,o.status="You should land exactly onto the New Home\nIf you can't move otherwise you should <code>Pass</code>",o)):0===d?s(F,o.status="This message shouldn't appear. Case is checked in Dice.svelte",o):(p=l[r].find(t=>t.loc===d),g=null!=p,g&&s(F,o.status=`<em>Player ${t}'s </em> own pawn is there.Â \nIf you can't move otherwise you should <code>Pass</code>`,o))):(n=1,h=l[(r+1)%2].find(t=>t.loc===d),y=null!=h,y&&s(F,o.status=`Opponent <em>Player ${(r+1)%2+1}'s </em> pawn is there.`,o),m=l[r].find(t=>t.loc===d),$=null!=m,$&&s(F,o.status+=`\n<em>Player ${t}'s </em> own pawn is there.`,o)),console.log("that cell",n,d),p||m||y||!w?y&&(8===d?s(F,o.status+=`\nPlayer <em>${h.p}</em>'s Pawn #<em>${h.id}</em> is Safe!\nTry another move!`,o):(s(F,o.status+="Send 'em Home!",o),s(F,o.status+=`\nPlayer <em>${h.p}</em>'s Pawn #<em>${h.id}</em> going back Home `,o),h.loc=0,s(Q,l[r][c].loc=d,l),s(F,o.played=1,o),u())):(console.log("MOVING PAWN"),s(F,o.status+=`\nPlayer <em>${f}</em>'s Pawn #<em>${a.id}</em> moving to square <em>${d}</em>`,o),8===d&&s(F,o.status+="\nPawn is now <em>Untouchable</em>!",o),s(Q,l[r][c].loc=d,l),s(F,o.played=1,o),u())}else s(F,o.status+=void 0!==t?`\nit's not Player <em>${t}</em>'s turn!.`:"\nno pawns there!",o)};let f;return t.$$.update=()=>{512&t.$$.dirty&&(f=o.turn+1)},[l,r,i,function(t){return 8===t?"special":""},d,t=>d(t.target.dataset.owner,t.target.dataset.pawnname,t.target),t=>d(t.target.dataset.owner,t.target.dataset.pawnname,t.target),t=>d(t.target.dataset.owner,t.target.dataset.pawnname,t.target)]}class vt extends G{constructor(t){super(),q(this,t,bt,wt,r,{})}}function At(t,e,n){const o=t.slice();return o[1]=e[n],o}function xt(t){let e,n,o=t[1]+"";return{c(){e=f("span"),n=p(o)},m(t,o){a(t,e,o),i(e,n)},p(t,e){1&e&&o!==(o=t[1]+"")&&y(n,o)},d(t){t&&u(e)}}}function Pt(e){let n,o=e[0],l=[];for(let t=0;t<o.length;t+=1)l[t]=xt(At(e,o,t));return{c(){n=f("div");for(let t=0;t<l.length;t+=1)l[t].c()},m(t,e){a(t,n,e);for(let t=0;t<l.length;t+=1)l[t].m(n,null)},p(t,[e]){if(1&e){let r;for(o=t[0],r=0;r<o.length;r+=1){const c=At(t,o,r);l[r]?l[r].p(c,e):(l[r]=xt(c),l[r].c(),l[r].m(n,null))}for(;r<l.length;r+=1)l[r].d(1);l.length=o.length}},i:t,o:t,d(t){t&&u(n),d(l,t)}}}function Nt(t,e,n){let{dicesArr:o=[0,0,0,0]}=e;return t.$set=t=>{"dicesArr"in t&&n(0,o=t.dicesArr)},[o]}class kt extends G{constructor(t){super(),q(this,t,Nt,Pt,r,{dicesArr:0})}}class Mt{constructor(){this.crypto="function"==typeof window.crypto.getRandomValues,this.intMin=Number.MIN_VALUE,this.intMax=Number.MAX_VALUE}random(){return this.crypto?window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295:Math.random()}bool(){return this.random()<.5}int(t,e){return this.randinterval(t,e,!0)}float(t,e){return t+(e-t)*this.random()}string(t,e){let n="";for(let o=0;o<t;o++)n+=e.charAt(this.int(0,e.length-1));return n}pick(t){return t[this.int(0,t.length-1)]}chance(t){return this.float(0,100)<t}challenge(t,e,n){let o=(n-t)/((e-t)/100);return o<=0&&(o=0),o>=100&&(o=100),this.chance(o)}shuffle(t){let e,n,o=t.length;for(;--o>0;)n=this.int(0,o),e=t[o],t[o]=t[n],t[n]=e;return t}weighted(t,e){if(t.length!==e.length)throw new RangeError("Chance: Length of array and odds must match");let n,o=0;for(let t=0;t<e.length;++t){if(n=e[t],isNaN(n))throw new RangeError("Chance: All weights must be numbers");n>0&&(o+=n)}if(0===o)throw new RangeError("Chance: No valid entries in array odds");const l=this.random()*o;let r,c=0,s=-1;for(let t=0;t<e.length;++t){if(n=e[t],c+=n,n>0){if(l<=c){r=t;break}s=t}t===e.length-1&&(r=s)}return t[r]}randinterval(t,e,n){return t==e?t:e<t?this.randinterval(e,t,n):t<0||e<1?this.rand(e-t+(n?1:0))+t:t+this.rand(e-t+(n?1:0))}rand(t){return(t<=0||t>this.intMax)&&console.error("n out of (0, INT_MAX]"),Math.floor(this.random()*t)}}function Tt(t){let e,n,o,l,r,c=t[2].diceToMove+"";return{c(){e=f("pre"),n=p("it's a "),o=f("em"),l=p(c),r=p("!")},m(t,c){a(t,e,c),i(e,n),i(e,o),i(o,l),i(e,r)},p(t,e){4&e&&c!==(c=t[2].diceToMove+"")&&y(l,c)},d(t){t&&u(e)}}}function _t(t){let e,n,r,c,s;return{c(){e=f("button"),e.textContent="ROLL",n=m(),r=f("button"),r.textContent="PASS"},m(o,i){a(o,e,i),a(o,n,i),a(o,r,i),c||(s=[g(e,"click",t[5]),g(r,"click",(function(){l(t[0])&&t[0].apply(this,arguments)}))],c=!0)},p(e,n){t=e},d(t){t&&u(e),t&&u(n),t&&u(r),c=!1,o(s)}}}function Et(e){let n,o,l;return{c(){n=f("button"),n.textContent="RESTART"},m(t,r){a(t,n,r),o||(l=g(n,"click",e[4]),o=!0)},p:t,d(t){t&&u(n),o=!1,l()}}}function Rt(t){let e,n,o,l,r,c,s,d,h,g,b,v,A,x,P,N,k,M,T,_,E,R=t[2].round+"",C=t[2].rolled?`<em>Player ${t[1]}</em> rolled the Dices`:`<em>Player ${t[1]}</em> haven't rolled yet.`,S=!t[2].played&&t[2].rolled?`Waiting for <em>Player ${t[1]}</em> to play`:"",L=t[2].status+"",B=!Boolean(t[2].played)&&Boolean(t[2].rolled);k=new kt({props:{dicesArr:t[2].dicesArr}});let I=B&&Tt(t);function V(t,e){return t[3].won?Et:_t}let W=V(t),X=W(t);return{c(){e=f("div"),n=f("pre"),o=p("Round: "),l=f("em"),r=p(R),c=p("\nit's Player "),s=f("em"),d=p(t[1]),h=p("'s turn\n\n"),b=p("\n"),A=p("\n\n"),P=m(),N=f("div"),j(k.$$.fragment),M=m(),I&&I.c(),T=m(),_=f("div"),X.c(),g=new w(b),v=new w(A),x=new w(null),$(e,"class","status"),$(N,"class","dices"),$(_,"class","command")},m(t,u){a(t,e,u),i(e,n),i(n,o),i(n,l),i(l,r),i(n,c),i(n,s),i(s,d),i(n,h),g.m(C,n),i(n,b),v.m(S,n),i(n,A),x.m(L,n),a(t,P,u),a(t,N,u),D(k,N,null),i(N,M),I&&I.m(N,null),a(t,T,u),a(t,_,u),X.m(_,null),E=!0},p(t,[e]){(!E||4&e)&&R!==(R=t[2].round+"")&&y(r,R),(!E||2&e)&&y(d,t[1]),(!E||6&e)&&C!==(C=t[2].rolled?`<em>Player ${t[1]}</em> rolled the Dices`:`<em>Player ${t[1]}</em> haven't rolled yet.`)&&g.p(C),(!E||6&e)&&S!==(S=!t[2].played&&t[2].rolled?`Waiting for <em>Player ${t[1]}</em> to play`:"")&&v.p(S),(!E||4&e)&&L!==(L=t[2].status+"")&&x.p(L);const n={};4&e&&(n.dicesArr=t[2].dicesArr),k.$set(n),4&e&&(B=!Boolean(t[2].played)&&Boolean(t[2].rolled)),B?I?I.p(t,e):(I=Tt(t),I.c(),I.m(N,null)):I&&(I.d(1),I=null),W===(W=V(t))&&X?X.p(t,e):(X.d(1),X=W(t),X&&(X.c(),X.m(_,null)))},i(t){E||(O(k.$$.fragment,t),E=!0)},o(t){U(k.$$.fragment,t),E=!1},d(t){t&&u(e),t&&u(P),t&&u(N),H(k),I&&I.d(),t&&u(T),t&&u(_),X.d()}}}function Ct(t,e,n){let o,l,r;c(t,F,t=>n(2,o=t)),c(t,Q,t=>n(7,l=t)),c(t,J,t=>n(3,r=t));let i=new Mt,a=(i.bool(),()=>i.int(0,1)),{rollAll:u=function(){return[a(),a(),a(),a()]}}=e,{nextTurn:d=function(){s(F,o={turn:(o.turn+1)%2,rolled:0,played:0,round:o.round+1,status:o.status+"\n...next turn...",dicesArr:[0,0,0,0]}),console.log("NEXT TURN")}}=e;const f=(t,e)=>t+e;let p;s(F,o.dicesArr=[0,0,0,0],o),s(F,o.diceToMove=o.dicesArr.reduce(f),o),s(F,o.rolled=0,o),s(F,o.played=0,o);let m=function(){return 0==o.rolled&&0==o.played};return t.$set=t=>{"rollAll"in t&&n(6,u=t.rollAll),"nextTurn"in t&&n(0,d=t.nextTurn)},t.$$.update=()=>{4&t.$$.dirty&&n(1,p=o.turn+1)},[d,p,o,r,function(){s(Q,l=[[{loc:0,p:1,id:1},{loc:0,p:1,id:2},{loc:0,p:1,id:3},{loc:0,p:1,id:4},{loc:0,p:1,id:5},{loc:0,p:1,id:6},{loc:0,p:1,id:7}],[{loc:0,p:2,id:1},{loc:0,p:2,id:2},{loc:0,p:2,id:3},{loc:0,p:2,id:4},{loc:0,p:2,id:5},{loc:0,p:2,id:6},{loc:0,p:2,id:7}]]),s(F,o={round:1,turn:0,status:"",dicesArr:[0,0,0,0]}),s(J,r={points:[],won:null})},function(){console.log(o.rolled,o.played,m()),m()?(s(F,o.dicesArr=u(),o),s(F,o.diceToMove=o.dicesArr.reduce(f),o),s(F,o.rolled=1,o),s(F,o.status=`\nPlayer <em>${p}</em> just rolled: <em>${o.diceToMove}</em>`,o),0===o.diceToMove&&d()):s(F,o.status+="\nDice is already rolled, you can not roll again.",o)},u]}class St extends G{constructor(t){super(),q(this,t,Ct,Rt,r,{rollAll:6,nextTurn:0})}}function Lt(e){let n,o,l,r,c,s,d;return r=new vt({}),s=new St({}),{c(){n=f("main"),o=f("p"),l=m(),j(r.$$.fragment),c=m(),j(s.$$.fragment),$(n,"class","svelte-1fjybpv")},m(t,e){a(t,n,e),i(n,o),i(n,l),D(r,n,null),i(n,c),D(s,n,null),d=!0},p:t,i(t){d||(O(r.$$.fragment,t),O(s.$$.fragment,t),d=!0)},o(t){U(r.$$.fragment,t),U(s.$$.fragment,t),d=!1},d(t){t&&u(n),H(r),H(s)}}}function Bt(t,e,n){let o,l;return c(t,F,t=>n(0,o=t)),c(t,J,t=>n(1,l=t)),t.$$.update=()=>{1&t.$$.dirty&&console.log("gamestate:",o),2&t.$$.dirty&&console.log("game",l)},[]}return new class extends G{constructor(t){super(),q(this,t,Bt,Lt,r,{})}}({target:document.body,props:{}})}();
//# sourceMappingURL=bundle.js.map
